<Window x:Class="Camara_Service.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="AMORA AGRO" Height="812" Width="1190" Background="#0D0D0D" WindowStartupLocation="CenterScreen" Loaded="Window_Loaded" Icon="logo.png" WindowState="Maximized"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        >
    

    <Grid>
        <!-- Background Gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0D0D0D" Offset="0.0"/>
                <GradientStop Color="#FF04295D" Offset="1.0"/>
            </LinearGradientBrush>
        </Grid.Background>
                                                                                        
        <!-- Sidebar -->
        <StackPanel Width="200" HorizontalAlignment="Left" Margin="0,60,0,0" Background="#FF0A2433">
            <TextBlock Text="Dashboard" FontSize="20" Foreground="Transparent" Margin="20,30,0,0"/>
            <StackPanel Margin="10,20,0,0" MinHeight="400">
                <Button Name="ongletDashboard" Background="#00CFFF" Foreground="White" FontSize="16" Padding="15,10" Margin="5,5,5.4,5" BorderBrush="Transparent" Click="OngletDashboard_Click">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="M12,2L12,22M2,12H22M5,5H19V19H5Z" Width="24" Height="24" Fill="White"/>
                        <TextBlock Text="Accueil" Foreground="White" Margin="10,0,0,0"/>
                    </StackPanel>
                </Button>
                <Button Name="ongletProduits" Background="#00CFFF" Foreground="White" FontSize="16" Padding="15,10" Margin="5" BorderBrush="Transparent" Click="ongletProduits_Click">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="M7,2H17V4H7M4,4V22H20V4H4ZM7,6H17V10H7M7,12H17V16H7M7,18H17V20H7Z" Width="24" Height="24" Fill="White"/>
                        <TextBlock Text="Produits" Foreground="White" Margin="10,0,0,0"/>
                    </StackPanel>
                </Button>
                <Button Name="ongletFactures" Background="#00CFFF" Foreground="White" FontSize="16" Padding="15,10" Margin="5" BorderBrush="Transparent" Click="HistoriqueFacturesOnglet">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="M16,3H14V8H10V3H8V8H4V10H20V8H16ZM20,12H4V20H20V12ZM6,14H9V18H6V14ZM15,14H18V18H15V14Z" Width="24" Height="24" Fill="White"/>
                        <TextBlock Text="Factures" Foreground="White" Margin="10,0,0,0"/>
                    </StackPanel>
                </Button>
            </StackPanel>
            <StackPanel  VerticalAlignment="Bottom">
                <Button x:Name="ongletParametres1" Background="#FF313B3B" Foreground="White" FontSize="16" Padding="15,10" Margin="5,5,5.4,5" BorderBrush="Transparent" Click="OngletParametres1_Click">
                    <StackPanel Orientation="Horizontal">
                        <Path Data="M12 22C10.7 22 9.4 21.8 8.2 21.4L7 24L1 23L2.6 18.5C2.2 17.3 2 16 2 14.5C2 13 2.2 11.7 2.6 10.5L1 6L7 5L8.2 7.6C9.4 7.2 10.7 7 12 7C13.3 7 14.6 7.2 15.8 7.6L17 5L23 6L21.4 10.5C21.8 11.7 22 13 22 14.5C22 16 21.8 17.3 21.4 18.5L23 23L17 24L15.8 21.4C14.6 21.8 13.3 22 12 22Z" Width="24" Height="24" Fill="White"/>
                        <TextBlock Text="Paramètres" Foreground="White" Margin="10,0,0,0"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </StackPanel>

        <Grid Height="60" VerticalAlignment="Top" Background="#FF0A2433">
            <TextBlock Foreground="White" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" Text="Tableau de Bord📊"/>
            <Button x:Name="ongletParametres_Copy" Background="#FF1C2C40" Foreground="White" FontSize="24" Padding="15,10" Width="200" HorizontalAlignment="Right" BorderBrush="#FF23395D" Click="Button_Click_2" FontWeight="Bold" ToolTip="Ajouter une facture">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Foreground="White" Margin="10,0,0,0"><Run Text="+"/><Run FontWeight="Normal" FontSize="16" Text="🧾"/></TextBlock>
                </StackPanel>
            </Button>
            <Canvas HorizontalAlignment="Left" Height="124" VerticalAlignment="Top" Width="131" Margin="33,0,0,-64">
                <Canvas.Background>
                    <ImageBrush ImageSource="logo.png"/>
                </Canvas.Background>
            </Canvas>
        </Grid>
        <!-- Main Content Area -->
        <Grid Margin="200,60,0,0">
            <Ellipse Fill="#00CFFF"  Width="500" Height="300" Opacity="0.2" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="100,-50,0,0"/>
            <Ellipse Fill="#00CFFF" Width="600" Height="350" Opacity="0.1" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,100,50"/>
            <Ellipse Fill="#FF00CFFF" Width="400" Height="200" Opacity="0.3" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            <Border BorderThickness="2,2,0,0">

                <Grid x:Name="conteneurPrincipale"  ScrollViewer.VerticalScrollBarVisibility="Hidden" Margin="0,0,-0.4,0.4" >
                    <Grid x:Name="GridProduits" Loaded="GridProduits_Loaded">
                        <!-- Actions -->
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0">
                            <Button Content="Ajouter Produit" Background="#00CFFF" Foreground="White" FontSize="14" Padding="10" Margin="5"
                                Click="AjouterProduit_Click"/>
                            <Button Content="Actualiser" Background="#00CFFF" Foreground="White" FontSize="14" Padding="10,5" Margin="5"
                                Click="ActualiserStock_Click"/>
                            <!-- Filtrage par Type -->
                            <ComboBox x:Name="FiltreTypeComboBox" SelectedIndex="0" Width="150" Margin="5" Background="#23395D" Foreground="Black" FontSize="14"
                                 Height="28">
                                <ComboBoxItem Content="Tous les magasins"/>
                                <ComboBoxItem Content="Boutique Amoro"/>
                                <ComboBoxItem Content="1"/>
                                <ComboBoxItem Content="2"/>
                                <ComboBoxItem Content="3"/>
                                <ComboBoxItem Content="4"/>
                                <ComboBoxItem Content="5"/>
                                <ComboBoxItem Content="6"/>
                                <ComboBoxItem Content="7"/>
                                <ComboBoxItem Content="8"/>
                                <ComboBoxItem Content="9"/>
                                <ComboBoxItem Content="10"/>
                            </ComboBox>
                            <Button Content="📜 Historique"
                                Width="140"
                                Height="40"
                                Margin="5"
                                FontSize="14"
                                FontWeight="Bold"
                                Foreground="White"
                                Background="#FF2C3E50"
                                BorderBrush="#FF16A085"
                                BorderThickness="2"
                                Padding="10,5"
                                Cursor="Hand"
                                HorizontalAlignment="Left" Click="Button_Click_3">
                                <Button.Effect>
                                    <DropShadowEffect Color="Black" Opacity="0.5" ShadowDepth="4" BlurRadius="8"/>
                                </Button.Effect>
                            </Button>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10">
                            <TextBlock Text="Rechercher :" VerticalAlignment="Center" Foreground="White" Margin="0,0,5,0" FontSize="14"/>
                            <TextBox x:Name="RechercheStockTxt" Width="200" Height="28" 
                             VerticalContentAlignment="Center"
                             Background="#23395D" Foreground="White" BorderBrush="#00CFFF"
                             />      
                        </StackPanel>
                        <!-- DataGrid pour afficher le stock -->
                        <DataGrid x:Name="StockDataGrid" AutoGenerateColumns="False" Margin="5,70,10,10" Background="{x:Null}" Foreground="White" 
                            RowBackground="#1B263B" MouseDoubleClick="StockDataGrid_MouseDoubleClick" AlternatingRowBackground="#23395D" BorderBrush="{x:Null}" FontSize="16" GridLinesVisibility="Horizontal" IsReadOnly="True" CanUserAddRows="False">
                            <DataGrid.ColumnHeaderStyle>
                                <Style TargetType="{x:Type DataGridColumnHeader}">
                                    <Setter Property="Background" Value="#FF1B263B"/>
                                    <Setter Property="Foreground" Value="white"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </Style>
                            </DataGrid.ColumnHeaderStyle>
                            <DataGrid.Columns >
                                <DataGridTextColumn Header="Nom" Binding="{Binding Nom}"  Width="2*"/>
                                <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
                                <DataGridTextColumn Header="Magasin" Binding="{Binding magasin}" Width="*"/>
                                <DataGridTextColumn Header="Prix (FCFA)" Binding="{Binding Prix}" Width="*"/>
                                <DataGridTextColumn Header="Quantité" Binding="{Binding Quantite}" Width="*"/>

                                <!-- Colonne d'actions -->
                                <DataGridTemplateColumn Header="Actions" Width="150">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button Content="Éditer" Padding="5" Margin="5,0" Background="#FF8C00" Foreground="White"
                                                    Click="EditerProduit_Click"/>
                                                <Button Content="Supprimer" Padding="5" Margin="5,0" Background="#D32F2F" Foreground="White"
                                                    Click="SupprimerProduit_Click"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                    <ScrollViewer x:Name="GridFactures"  Loaded="GridFactures_Loaded" VerticalScrollBarVisibility="Hidden" BorderBrush="#FF544747" BorderThickness="2,2,0,0" Background="#FF1C2C40">
                        <Grid>
                            <!-- Titre de la facture -->
                            <TextBlock Text="Créer une Facture" Foreground="White" FontSize="28" FontWeight="Bold"
                                HorizontalAlignment="Center" Margin="361,20,344.8,19.4"/>

                            <!-- Formulaire centré -->
                            <StackPanel Orientation="Vertical" Margin="60,60,42.8,60.4" CanVerticallyScroll="True" ScrollViewer.CanContentScroll="True">
                                <Border Background="#FF202F3C" CornerRadius="10" Padding="10" Margin="0,0,0,20" Height="102">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <StackPanel Height="84" Orientation="Vertical" HorizontalAlignment="Left" Width="395">

                                            <TextBlock Text="Nom du client:" Foreground="LightGray" FontSize="16" VerticalAlignment="Center" Margin="0,0,0,0" Width="109"/>
                                            <TextBox x:Name="nomclient" FontSize="14" Padding="10" Background="#23395D"
                                                Foreground="White"  BorderBrush="{x:Null}" Margin="0,8,0.4,0.4" Width="350"/>
                                        </StackPanel>
                                        <StackPanel Height="84"  Orientation="Vertical" HorizontalAlignment="Right" Width="496">

                                            <TextBlock Text="Telephone client" Foreground="LightGray" FontSize="16" VerticalAlignment="Center" Margin="194,0,165,0"/>
                                            <TextBox x:Name="telephoneClient" FontSize="14" Padding="10" Background="#23395D"
                                                Foreground="White"  BorderBrush="{x:Null}" Margin="0,8,0.4,0.4" Width="350"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                <!-- Informations Client -->
                                <Border Background="#FF202F3C" CornerRadius="10" Padding="15" Margin="0,0,0,20" Height="147">
                                    <StackPanel HorizontalAlignment="Center" Margin="-5.2,0,-5,0" Width="871">
                                        <TextBlock Text="Ajouter un produit au Panier" Foreground="LightGray" FontSize="16" Margin="0,0,0,10"/>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <ComboBox x:Name="ProduitComboBox" 
                                                Width="233" 
                                                FontSize="14" 
                                                Background="#23395D"
                                                Foreground="Black" 
                                                Margin="0,0,10,0"
                                                IsEditable="True" 
                                                BorderThickness="0"
                                                Padding="10"
                                                BorderBrush="{x:Null}" 
                                                SelectionChanged="ProduitComboBox_SelectionChanged" 
                                                KeyUp="ProduitComboBox_KeyUp">
                                                <ComboBox.Resources>
                                                    <!-- Style pour les éléments de la liste déroulante -->
                                                    <Style TargetType="{x:Type ComboBoxItem}">
                                                        <Setter Property="Background" Value="transparent"/>
                                                        <Setter Property="Foreground" Value="black"/>
                                                        <!-- Texte blanc -->
                                                        <Setter Property="Padding" Value="5,2"/>
                                                        <Setter Property="FontSize" Value="14"/>
                                                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                                                    </Style>
                                                </ComboBox.Resources>
                                            </ComboBox>


                                            <!-- Champ Quantité -->
                                            <TextBox x:Name="QuantiteTextBox" Text="1" Width="100" FontSize="14" Padding="10" Background="#23395D"
                                                Foreground="White" Margin="0,0,10,0" BorderBrush="{x:Null}"/>
                                            <!-- Champ Prix Unitaire -->
                                            <TextBox x:Name="PrixUnitaireTextBox" Width="100" FontSize="14" Padding="10" Background="#23395D"
                                                Foreground="White"  BorderBrush="{x:Null}"/>
                                        </StackPanel>

                                        <!-- Bouton Ajouter au Panier -->
                                        <Border CornerRadius="16" Margin="0,10,0,0" Width="200" Background="#FF2ECC71" HorizontalAlignment="Center">
                                            <Button Content="Ajouter au Panier" Background="Transparent" Foreground="White" FontSize="14" Padding="10,5"
                                                Click="AjouterProduitfacture_Click" BorderBrush="{x:Null}" />
                                        </Border>
                                    </StackPanel>
                                </Border>

                                <!-- Panier DataGrid -->
                                <Border Background="#FF202F3C" MaxHeight="800" CornerRadius="10" Padding="15" Margin="0,0,0,20" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                                    <StackPanel Orientation="Vertical">
                                        <TextBlock Text="Panier" Foreground="LightGray" FontSize="16" Margin="0,0,0,10"/>
                                        <DataGrid x:Name="PanierDataGrid" AutoGenerateColumns="False" HeadersVisibility="Column"
                                            CanUserAddRows="False" Background="#23395D" Foreground="White" RowBackground="#34495E"
                                            AlternatingRowBackground="#2C3E50" HorizontalAlignment="Center" BorderThickness="0" FontSize="18" CellEditEnding="PanierDataGrid_CellEditEnding" MaxHeight="300" >
                                            <DataGrid.Resources>
                                                <!-- Couleur transparente pour les en-têtes -->
                                                <Style TargetType="{x:Type DataGridColumnHeader}">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="Foreground" Value="LightGray"/>
                                                    <Setter Property="FontWeight" Value="Bold"/>
                                                    <Setter Property="BorderThickness" Value="0"/>
                                                </Style>
                                            </DataGrid.Resources>
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Produit" Binding="{Binding Nom}" IsReadOnly="True" Width="*"/>
                                                <DataGridTextColumn Header="Quantité" Binding="{Binding Quantite}" Width="*"/>
                                                <DataGridTextColumn Header="Prix Unitaire" Binding="{Binding PrixUnitaire, StringFormat=N2}" Width="*"/>
                                                <DataGridTextColumn Header="Total" Binding="{Binding Total, StringFormat=N2}" Width="*"/>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </StackPanel>
                                </Border>

                                <!-- Affichage du Total -->
                                <Border Background="#FF202F3C" CornerRadius="10" Padding="10" Margin="0,0,0,20" Height="auto">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="Total :" Foreground="LightGray" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock x:Name="TotalTextBlock" Text="0 FCFA" Foreground="White" FontSize="16" FontWeight="Bold"/>
                                    </StackPanel>
                                </Border>
                                <Border Background="#FF202F3C" CornerRadius="10" Padding="10" Margin="0,0,0.2,20" Height="94">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Width="861" Margin="0,0,0,0.4">

                                            <TextBlock Text="Acompte" Foreground="LightGray" FontSize="16" VerticalAlignment="Center" Margin="0,0,0,0" Width="109"/>
                                            <TextBox x:Name="accompteText" FontSize="14" Padding="10" Background="#23395D"
                                                Foreground="White"  BorderBrush="{x:Null}" Margin="0,8,0.4,0.4" Width="350"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                                    <!-- Icon de confirmation -->
                                    <materialDesign:PackIcon x:Name="IconSuccess" Kind="CheckCircle" Width="48" Height="48" Foreground="LimeGreen" Visibility="Collapsed"/>
                                </StackPanel>
                                <!-- Bouton "Mettre a jour la Facture" avec Border -->
                                <Border Name="updatFacturebtn" CornerRadius="16" Width="250" Background="#FF173CBD" HorizontalAlignment="Center" Margin="8" Visibility="Collapsed">
                                    <Button Name="updatFacturebtnv" Content="Modifier"  Background="Transparent" Foreground="White" FontSize="16" Padding="10,5" Margin="1" ToolTip="Enregistrer les modifications sur la facture"
                                        BorderBrush="{x:Null}" Click="Button_Click_1" />
                                </Border>
                                <!-- Bouton "Créer la Facture" avec Border -->
                                <Border CornerRadius="16" Width="250" Background="#FF2ECC71" HorizontalAlignment="Center">
                                    <Button Content="Créer la Facture"  Background="Transparent" Foreground="White" FontSize="16" Padding="10,5" Margin="1"
                                        BorderBrush="{x:Null}" Click="Button_Click_1" />
                                </Border>
                                
                                <TextBox x:Name="dateFacture" FontSize="14" Padding="10" Background="#FF1A1A2E"
                                    Foreground="White"  BorderBrush="{x:Null}" Height="41" Width="200" Margin="10,0,722.2,0" />
                            </StackPanel>

                        </Grid>
                    </ScrollViewer>
                    <Grid x:Name="dashboard" Margin="0,0,-0.4,-0.6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="389*"/>
                            <ColumnDefinition Width="101*"/>
                        </Grid.ColumnDefinitions>
                        <WrapPanel  HorizontalAlignment="Center" VerticalAlignment="Top" Orientation="Horizontal" >
                            <!-- Card: Total Sales -->

                            <!-- Card: Active Services -->

                            <!-- Card: New Clients -->
                            <Button Background="#00CFFF" Foreground="White" FontSize="16" Padding="15,10" Margin="0,5" BorderBrush="Transparent" Width="180" Click="Button_Click_2">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="+" Foreground="White" Margin="10,0,0,0" FontSize="22" FontWeight="Bold" Height="31"/>

                                    <TextBlock Text="Facture🧾" Foreground="White" Margin="10,0,0,0" Height="17"/>
                                </StackPanel>
                            </Button>
                            <Button Background="#00CFFF" Foreground="White" FontSize="16" Padding="15,10" Margin="0,5" BorderBrush="Transparent" Width="180" Click="Button_Click">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="+" Foreground="White" Margin="10,0,0,0" FontSize="22" FontWeight="Bold" Height="31"/>

                                    <TextBlock Text="Produit📦" Foreground="White" Margin="10,0,0,0" Height="17"/>
                                </StackPanel>
                            </Button>
                        </WrapPanel>
                        <Grid Margin="10,70,10.4,-0.4" x:Name="grosgrid" Grid.Column="0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="420*"/>
                                <RowDefinition Height="20*"/>
                                <RowDefinition Height="230*"/>
                            </Grid.RowDefinitions>
                            <!-- WrapPanel scrollable pour le stock -->
                            <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled">
                                <WrapPanel x:Name="cartstockcontainer"
                                   HorizontalAlignment="Center"
                                   Orientation="Horizontal"
                                   ScrollViewer.CanContentScroll="True" />
                              </ScrollViewer>

                              <!-- WrapPanel scrollable pour la vente -->
                              <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled">
                                 <WrapPanel x:Name="cartventecontainer"
                                   HorizontalAlignment="Center"
                                   Orientation="Horizontal"
                                   ScrollViewer.CanContentScroll="True" />
                              </ScrollViewer>
                        </Grid>

                    </Grid>
                    <Grid x:Name="HistoriqueFacturesGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <!-- Boutons d'action -->
                            <!-- Barre de recherche et filtrage -->
                            <RowDefinition Height="*"/>
                            <!-- Table des factures -->
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Barre de recherche et filtrage -->
                        <WrapPanel Orientation="Horizontal" Margin="10" HorizontalAlignment="Center" VerticalAlignment="Top">
                            <TextBlock Text="Rechercher :" FontSize="16" Foreground="#00CFFF" Margin="0,0,10,0" VerticalAlignment="Center"/>
                            <TextBox x:Name="RechercheFacture" Width="200" Margin="0,0,10,0" BorderBrush="#00CFFF" Background="#1C2C40" Foreground="White" Padding="5" TextChanged="RechercheFacture_TextChanged"
                  />
                            <TextBlock Text="Filtrer par date :" FontSize="16" Foreground="#00CFFF" Margin="0,0,10,0" VerticalAlignment="Center"/>
                            <DatePicker x:Name="DateDebut" Width="150" Margin="0,0,10,0" BorderBrush="#00CFFF" Background="#1C2C40" Foreground="Black" />
                            <TextBlock Text="à" FontSize="16" Foreground="#00CFFF" Margin="0,0,10,0" VerticalAlignment="Center"/>
                            <DatePicker x:Name="DateFin" Width="150" Margin="0,0,10,0" BorderBrush="#00CFFF" Background="#1C2C40" Foreground="Black" />
                            <Button x:Name="FiltrerFacturesBtn" Content="Filtrer" Width="100" Margin="10,0,0,0" Background="#00CFFF" Foreground="White" Padding="5" BorderBrush="Transparent" Click="FiltrerFacturesBtn_Click" />
                        </WrapPanel>

                        <!-- Tableau des factures -->
                        <DataGrid x:Name="FacturesDataGrid" Grid.Row="1"  AutoGenerateColumns="False" HeadersVisibility="Column" CanUserAddRows="False" 
                            Background="#1C2C40" Foreground="#FFB6B6B6" BorderBrush="#00CFFF" BorderThickness="1" RowBackground="#2D3E50" AlternatingRowBackground="#23395D" 
                            HorizontalGridLinesBrush="#00CFFF" VerticalGridLinesBrush="{x:Null}" Margin="10,20,10,10" FontSize="16" IsReadOnly="True" 
                            MouseDoubleClick="FacturesDataGrid_MouseDoubleClick" PreviewKeyDown="FacturesDataGrid_PreviewKeyDown" MouseRightButtonUp="FacturesDataGrid_MouseRightButtonUp">
                            <DataGrid.Resources>
                                <!-- Couleur transparente pour les en-têtes -->
                                <Style TargetType="{x:Type DataGridColumnHeader}">
                                    <Setter Property="Background" Value="Transparent"/>
                                    <Setter Property="Foreground" Value="LightGray"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="BorderThickness" Value="1"/>
                                </Style>
                            </DataGrid.Resources>
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="80" />
                                <DataGridTextColumn Header="Nom Client" Binding="{Binding Client}" Width="*" />
                                <DataGridTextColumn Header="Date" Binding="{Binding Date, StringFormat=\{0:yyyy-MM-dd\}}" Width="*" />
                                <DataGridTextColumn Header="Total" Binding="{Binding Total}" Width="*" />
                                <DataGridTextColumn Header="Acompte" Binding="{Binding Accompte}" Width="*" />
                                <DataGridTextColumn Header="Reliquat" Binding="{Binding Reliquat}" Width="*" />
                                <DataGridTextColumn Header="Admin" Binding="{Binding Admin}" Width="*" />
                            </DataGrid.Columns>
                        </DataGrid>

                        <!-- Boutons d'action -->
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="10">
                            <Label Content="Pour supprimer une facture: Touche clavier 'supp' ou 'delete'" Background="{x:Null}" Foreground="#FF6A6A6A"/>
                            <Button x:Name="ExporterFactureBtn_Copy" Margin="10,0" Padding="10,5" Background="#00CFFF" Foreground="White" BorderBrush="Transparent" Click="ExporterFactureBtn_Copy_Click">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <!-- Icône d'impression -->
                                    <TextBlock Text="🖨" FontSize="16" Margin="0,0,5,0" VerticalAlignment="Center"/>
                                    <!-- Texte du bouton -->
                                    <TextBlock Text="IMPRIMER" FontSize="14" VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                            <Button x:Name="ExporterFactureBtn_Copy2" Content="Supprimer X" Margin="10,0" Padding="10,5" Background="#FFCB1E1E" Foreground="White" BorderBrush="Transparent" Click="ExporterFactureBtn_Copy2_Click"  />
                            <Button x:Name="ExporterFactureBtn_Copy1" Content="Log de Suppressions" Margin="10,0" Padding="10,5" Background="#FF2C4449" Foreground="White" BorderBrush="Transparent" Click="ExporterFactureBtn_Copy1_Click"  />


                        </StackPanel>

                    </Grid>
                    <Grid x:Name="gridSettings" >
                        <!-- Panneau utilisateur connecté -->
                        <Border Background="#232345"  CornerRadius="30" Width="823" Height="449" HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.9" Margin="97,155,73.6,106.4">
                            <Grid Margin="20" Loaded="settingloaded">
                                <!-- Titre -->
                                <TextBlock Text="Gestion de l'utilisateur" FontSize="24" FontWeight="Bold" Foreground="#00CFFF" HorizontalAlignment="Center" Margin="0,10,0,20"/>

                                <!-- Informations utilisateur -->
                                <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Margin="40,80,0,0">
                                    <TextBlock Text="Utilisateur" Foreground="White" FontSize="16"/>
                                    <TextBlock x:Name="textUsername" FontSize="20" FontWeight="Bold" Foreground="#00CFFF"/>
                                </StackPanel>

                                <!-- Modifier le mot de passe -->
                                <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Margin="40,180,0,0">
                                    <TextBlock Text="Changer votre mot de passe" FontSize="16" Foreground="#00CFFF" Margin="0,0,0,10"/>
                                    <Border Background="#2C2C3A" CornerRadius="10" Padding="5" Margin="0,0,0,10">
                                        <PasswordBox x:Name="txtOldPassword" Width="300" Margin="0" ToolTip="Ancien code" Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16"/>
                                    </Border>
                                    <Border Background="#2C2C3A" CornerRadius="10" Padding="5">
                                        <PasswordBox x:Name="txtNewPassword" ToolTip="Nouveau code" Width="300" Margin="0"  Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16"/>
                                    </Border>
                                    <Button Content="Modifier" Width="300" Height="40" Background="#00CFFF" Foreground="White" BorderThickness="0"  Margin="0,10,0,0" Click="BtnChangePassword_Click"/>
                                </StackPanel>

                                <!-- Si utilisateur est admin -->
                                <StackPanel x:Name="adminPanel" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,80,40,0" Visibility="Collapsed">
                                    <TextBlock Text="Créer un utilisateur (Admin)" FontSize="16" Foreground="#00CFFF" Margin="0,0,0,10"/>
                                    <!-- Mot de passe admin -->
                                    <Border Background="#2C2C3A" CornerRadius="10" Padding="5">
                                        <PasswordBox x:Name="txtAdminPassword" ToolTip="Mot de passe" Width="300"  Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16"/>
                                    </Border>
                                    <Button Content="Valider" Width="300" Height="40" Background="#00CFFF" Foreground="White" BorderThickness="0"  Margin="0,10,0,0" Click="BtnAdminValidate_Click"/>

                                    <!-- Formulaire pour créer un utilisateur -->
                                    <StackPanel x:Name="createUserPanel"  Margin="0,20,0,0" Visibility="Collapsed">
                                        <TextBlock Text="Informations du nouvel utilisateur" FontSize="14" Foreground="#B3B3B3" Margin="0,0,0,10"/>
                                        <Border Background="#2C2C3A" CornerRadius="10" Padding="5">
                                            <TextBox x:Name="txtNewUserName" ToolTip="Nom" Width="300"  Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16"/>
                                        </Border>
                                        <Border Background="#2C2C3A" CornerRadius="10" Padding="5" Margin="0,10,0,0">
                                            <TextBox x:Name="txtNewUsername" ToolTip="Username" Width="300"  Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16"/>
                                        </Border>
                                        <Border Background="#2C2C3A" CornerRadius="10" Padding="5" Margin="0,10,0,0">
                                            <PasswordBox x:Name="txtNewUserPassword" ToolTip="Code" Width="300"  Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16"/>
                                        </Border>
                                        <Button Content="Créer l'utilisateur" Width="300" Height="40" Background="#00CFFF" Foreground="White" BorderThickness="0"  Margin="0,10,0,0" Click="BtnCreateUser_Click"/>
                                    </StackPanel>
                                    <Button Content="Users" Width="300" Height="40" Background="Black" Foreground="White" BorderThickness="0"  Margin="0,10,0,0" Click="BtnGestionUsers_Click"/>
                                </StackPanel>

                                <!-- Fermeture -->
                                <Button Width="40" Height="40" Background="Transparent" BorderThickness="0" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,10,0" Click="CloseWindow">
                                    <TextBlock Text="✖" FontSize="16" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
                                </Button>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </Border>
            <!-- Top Bar -->


            <!-- Dashboard Cards -->

        </Grid>
    </Grid>
</Window>
